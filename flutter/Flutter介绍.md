# Flutter介绍

**Flutter**是来自Google的一款应用开发框架，用来创建跨平台（`IOS`和`Android`）的移动应用。正如官网所提到的，它致力于尽可能的让应用开发变的**简单、快速和富有生产力**。诸如**热重载**，海量组件目录，良好的性能以及稳固的社区贡献等特点使得上述目标得以实现并且让`Flutter`成为了一个相当优秀的框架。

在本文中，我们将讨论下面这些主题：

- Flutter的起源
- 什么是组件（widget）？
- Flutter和现有框架的对比
- 为什么选择Flutter?

### 一、 Flutter的起源
和其它非常有名的软件一样，`Flutter`来源于Google。起初，`Flutter`只是Google的开发人员在试图从Chrome中删除一些兼容性支持，以使其运行更加流畅时的一个实验品。几周后，在删除了许多兼容性支持后，开发人员发现他们的渲染速度是Chrome的20倍，并发现它有很大的潜力。

Google创建了一个与`CPU`和`GPU`直接通信的分层框架，以允许开发人员尽可能地自定义应用程序。

### 二、什么是组件（widget）？

`Flutter`中的所有内容都可以使用小组件创建。 方向，布局，透明性，动画……一切都只是一个小组件。 它是Flutter的主要功能，从简单按钮到动画或手势的所有操作都使用小组件完成。 这很棒，因为它允许用户选择组合而不是继承，从而使应用程序的构建像构建乐高塔一样简单。 您要做的只是选取小组件并将它们放在一起以创建应用程序。

有许多基本的小组件可帮助您使用`Flutter`构建应用程序。 所有这些小组件都在**Flutter Widget Catalog**中进行了分类。 因为`Flutter`中的所有内容都是由小组件组成的，所以你越了解如何使用、创建和组合小组件，就可以更好、更快地使用`Flutter`。 我们将在后面的文章中详细介绍小组件和小组件目录。

### 三、Flutter和现有框架的对比
当我们讨论移动应用开发的时候，我们可以找到很多种方法。但是最终，所有的方法都可以归结为2类：**原生**和**跨端**。让我们看看，和`Flutter`比起来，不同的方法都是啥样的以及如何工作的。我们首先要看的是`原生平台`，然后，在看跨端方案之前，我们先看一下`WebView系统`，最终我们会看看`Flutter`适合在哪里。

#### 3.1 原生平台
诸如`Android`和`IOS`的**原生框架**都坚如磐石。他们是移动应用开发**最稳定**地选择。已经有很多经过深度验证过的app并且有着广泛的社区基础以及开放的教程。下面的图描述了原生移动应用框架是如何工作的：

![](https://github.com/DuLinRain/pictures/blob/master/native-approch.png?raw=true)

正如我们在上图所看到的，这种框架下的**应用程序直接与系统进行通信**。这使得从功能的角度讲，原生框架是最给力的选择。然而，它也有**缺点**：**你需要学习2中不同的语言及对应的SDK**，对`Android`而言是`Kotlin`或`Java`，对`IOS`而言是`Object-C`或`Swift`。这些语言被用来实现具有相同功能的两种不同App。任何改动都需要在两种平台复制一遍，而整个过程可能并不会那么顺利。所以对于一个较小的团队或者对应用开发速度要求很快的某个人而言，原生框架并不是一个好的选择。

#### 3.2 WebView系统
另一方面，我们有着**跨平台**的方案，这种方案因其强大的生产力而闻名。通过这种方法，我们可以从一个代码库中获得同时适用于`Android`和`iOS`的应用程序，就像在`Flutter`中一样。但是每一种框架都有一些缺点。

总体来说，`Cordova`，`Ionic`，`PhoneGap`和`基于WebView的框架`都是跨平台框架的良好示例，并且尤其对于前端开发人员而言，它们是特别好的解决方案。 但是这些方案**缺乏性能，并且这些方案中的应用程序视图是由渲染HTML的WebView组成的，这意味着该应用基本上就是一个web网站**。

下面的这张图展示了**基于WebView的框架**是如何工作的：

![](https://github.com/DuLinRain/pictures/blob/master/webview-approch.png?raw=true)

正如上图所描述的，**基于WebView的框架使用bridge（这个bridge也通常被称为JsBridge）在JavaScript和原生系统之间进行通信，这个过程是非常慢的**，具体多慢通常取决于你所需要的功能，这也给这种基于WebView的框架增加了另一个缺点。

### 3.3 其它款平台方案
让我们以另一种跨平台方法为例，看看它可能有什么缺点。 `Xamarin`是微软2011给出的Windows跨平台开发的答案，它在生产率和编译时间方面都不太优秀。

环顾所有其它的跨端框架，**React Native**可以算得上是其中最好的一个跨端框架了，但是它严重依赖于**OEM组件**。

让我们来看一下**React Native框架**是如何工作的：

![](https://github.com/DuLinRain/pictures/blob/master/react-native.png?raw=true)

**React Native**框架**扩展了WebView系统中bridge的概念，不仅将它用于调用系统服务，而且将它用于组件创建**。就性能而言，这实际上是相当危险的。例如，一个组件可能在动画过程中需要被构建数百次，而由于`bridge`概念的扩展，该组件可能会在很大程度上减慢速度。 这也可能导致其他问题，特别是在操作系统最碎片化的`Android`上。

#### 3.4 Flutter的方案
在前面几个小节里，我们讨论了移动应用开发的不同方案。我们简略的看了看这些方案是如何工作的以及他们各自的缺点。现在，我们来看一看**Flutter**。

**Flutter**和其它几种方案比起来显得更好，这是因为应用程序是**提前编译（AOT，Ahead Of Time）**，而不是像`JavaScript`那样**即时编译（JIT，Just In Time）**。它同样**移除了bridge的概念并且不依赖于OEM平台。它允许自定义组件使用屏幕中的所有像素。** 这是意味着啥？ 这基本上意味着该应用在每个版本的`Android`和`IOS`上都显示相同的内容。

我们已经看过了其它几种不同方案的工作方式，现在我们也来看看**Flutter**的工作方式：

![](https://github.com/DuLinRain/pictures/blob/master/flutter-approch.png?raw=true)

现在你能够看出`Flutter`和其它几种跨端框架的区别了。`Flutter`移除了`bridge`和`OEM平台`，使用 **Widgets Rendering** 来处理画布和事件。同时它使用**Platform Channels**来调用系统服务。此外，使用有异步消息系统的平台API并不困难，这意味着如果你需要使用特定的`Android`或`IOS`功能，可以轻松实现。

`Flutter`还可以使用每个新开发人员都可以使用的**Channels**来创建插件。 因此，简单地说：编写一次代码，然后在任何地方使用它！

### 四、为什么要选择Flutter?
正如前面所述，对于跨平台开发而言，归功于它丰富的特性以及与其它的方案的不同点，`Flutter`是一个不错的选择。它不仅对开发者而言是个不错的选择，对用户和设计者同样如此。让我们来看看为何这样说：

- 对用户而言，`Flutter`为应用程序提供了吸引人心的用户界面，这增强了用户对这些应用程序的使用。
- 对于开发人员而言，Flutter使新开发人员可以轻松进入构建移动应用程序的世界，因为使用Flutter构建应用程序非常容易。` Flutter`不仅减少了开发应用程序的时间，而且还降低了创建应用程序的成本和复杂性。
- 对于Flutter应用的设计师而言，可以使用为该应用程序构思的原始设计来创建应用程序，而不会影响其任何方面。 因此，在开发时设计师的原始视觉不会改变。

最重要的是，`Flutter`是用于创建模型和原型非常有用的工具，它是一个行家，因为它对于设计人员和开发人员都是很好的联系，因为这两个角色通常彼此相距很远。

### 总结
在本章中，我们首先对Flutter进行了快速介绍。 然后，我们继续讨论`Flutter`的起源。 然后，在继续介绍为什么`Flutter`是一个不错的选择之前，我们先看了一下`Flutter`为什么适应于现有的移动应用程序开发世界。

如今，移动开发已不是真正的新世界，但是`Flutter`使其变得更有趣，更快。 并且，通过改善开发人员的工作流程，它使移动应用程序开发更接近于游戏玩法。



























